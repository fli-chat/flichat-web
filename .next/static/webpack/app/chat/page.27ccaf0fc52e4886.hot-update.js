"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/chat/page",{

/***/ "(app-pages-browser)/./src/hooks/useStompChat.ts":
/*!***********************************!*\
  !*** ./src/hooks/useStompChat.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useStompChat)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _stomp_stompjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stomp/stompjs */ \"(app-pages-browser)/./node_modules/@stomp/stompjs/esm6/client.js\");\n/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tanstack/react-query */ \"(app-pages-browser)/./node_modules/@tanstack/react-query/build/modern/useQuery.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/v4.js\");\n/* harmony import */ var _apis_user_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../apis/user.api */ \"(app-pages-browser)/./src/apis/user.api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\nfunction useStompChat(roomId, userId) {\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([\n        {\n            id: null,\n            message: '안녕하세요!',\n            profileColorType: 'BLUE',\n            roomId: String(roomId),\n            sender: 'Flichat Bot',\n            timeStamp: new Date().getTime,\n            userId,\n            clientMessageId: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n            optimistic: false\n        }\n    ]);\n    const clientRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const subRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // 간단한 중복 체크: clientMessageId → id\n    const hasMsg = (m)=>messages.some((x)=>m.clientMessageId && x.clientMessageId === m.clientMessageId || m.id && x.id === m.id);\n    const replaceOptimistic = (incoming)=>{\n        setMessages((prev)=>{\n            const idx = incoming.clientMessageId ? prev.findIndex((p)=>p.clientMessageId === incoming.clientMessageId) : -1;\n            if (idx >= 0) {\n                const next = [\n                    ...prev\n                ];\n                next[idx] = {\n                    ...next[idx],\n                    ...incoming,\n                    optimistic: false\n                };\n                return next;\n            }\n            // 없으면 신규 추가(중복만 피함)\n            if (hasMsg(incoming)) return prev;\n            return [\n                ...prev,\n                {\n                    ...incoming,\n                    optimistic: false\n                }\n            ];\n        });\n    };\n    const { data: userInfoData } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__.useQuery)({\n        queryKey: [\n            'userInfo'\n        ],\n        queryFn: {\n            \"useStompChat.useQuery\": ()=>_apis_user_api__WEBPACK_IMPORTED_MODULE_1__.UserApi.getUser()\n        }[\"useStompChat.useQuery\"],\n        retry: false,\n        staleTime: Infinity,\n        refetchOnMount: false,\n        refetchOnWindowFocus: false\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useStompChat.useEffect\": ()=>{\n            const client = new _stomp_stompjs__WEBPACK_IMPORTED_MODULE_4__.Client({\n                brokerURL: 'wss://chat.flichat.co.kr/ws-chat',\n                reconnectDelay: 5000,\n                heartbeatIncoming: 10000,\n                heartbeatOutgoing: 10000\n            });\n            client.onConnect = ({\n                \"useStompChat.useEffect\": ()=>{\n                    subRef.current = client.subscribe(\"/topic/chat/room/\".concat(roomId), {\n                        \"useStompChat.useEffect\": (msg)=>{\n                            const payload = JSON.parse(msg.body);\n                            replaceOptimistic(payload);\n                        }\n                    }[\"useStompChat.useEffect\"]);\n                }\n            })[\"useStompChat.useEffect\"];\n            client.activate();\n            clientRef.current = client;\n            return ({\n                \"useStompChat.useEffect\": ()=>{\n                    var _subRef_current;\n                    (_subRef_current = subRef.current) === null || _subRef_current === void 0 ? void 0 : _subRef_current.unsubscribe();\n                    client.deactivate();\n                    clientRef.current = null;\n                }\n            })[\"useStompChat.useEffect\"];\n        }\n    }[\"useStompChat.useEffect\"], [\n        roomId\n    ]);\n    const sendMessage = (content)=>{\n        var _userInfoData_data, _userInfoData_data1;\n        const client = clientRef.current;\n        if (!(client === null || client === void 0 ? void 0 : client.connected)) return;\n        const clientMessageId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        var _userInfoData_data_nickName, _userInfoData_data_profileColorType;\n        const optimistic = {\n            clientMessageId,\n            optimistic: true,\n            id: null,\n            userId,\n            sender: (_userInfoData_data_nickName = userInfoData === null || userInfoData === void 0 ? void 0 : (_userInfoData_data = userInfoData.data) === null || _userInfoData_data === void 0 ? void 0 : _userInfoData_data.nickName) !== null && _userInfoData_data_nickName !== void 0 ? _userInfoData_data_nickName : '',\n            profileColorType: (_userInfoData_data_profileColorType = userInfoData === null || userInfoData === void 0 ? void 0 : (_userInfoData_data1 = userInfoData.data) === null || _userInfoData_data1 === void 0 ? void 0 : _userInfoData_data1.profileColorType) !== null && _userInfoData_data_profileColorType !== void 0 ? _userInfoData_data_profileColorType : null,\n            roomId: String(roomId),\n            message: content,\n            timeStamp: new Date().toISOString()\n        };\n        // 낙관적 추가\n        setMessages((prev)=>[\n                ...prev,\n                optimistic\n            ]);\n        // 서버 전송(서버가 같은 clientMessageId를 되돌려주면 위 replaceOptimistic이 교체)\n        client.publish({\n            destination: '/send/chat/message',\n            body: JSON.stringify({\n                roomId: String(roomId),\n                userId,\n                message: content,\n                sender: optimistic.sender,\n                profileColorType: optimistic.profileColorType,\n                clientMessageId\n            })\n        });\n    };\n    // useCallback으로 감싸서 함수 참조 안정화\n    const mergeInitial = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStompChat.useCallback[mergeInitial]\": (list)=>{\n            setMessages({\n                \"useStompChat.useCallback[mergeInitial]\": (prev)=>{\n                    if (!(list === null || list === void 0 ? void 0 : list.length)) return prev;\n                    const next = [\n                        ...prev\n                    ];\n                    list.forEach({\n                        \"useStompChat.useCallback[mergeInitial]\": (m)=>{\n                            if (!messages.some({\n                                \"useStompChat.useCallback[mergeInitial]\": (x)=>m.clientMessageId && x.clientMessageId === m.clientMessageId || m.id && x.id === m.id\n                            }[\"useStompChat.useCallback[mergeInitial]\"])) {\n                                next.push({\n                                    ...m,\n                                    optimistic: false\n                                });\n                            }\n                        }\n                    }[\"useStompChat.useCallback[mergeInitial]\"]);\n                    return next;\n                }\n            }[\"useStompChat.useCallback[mergeInitial]\"]);\n        }\n    }[\"useStompChat.useCallback[mergeInitial]\"], []); // 빈 의존성 배열\n    return {\n        messages,\n        sendMessage,\n        mergeInitial\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VTdG9tcENoYXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs2REFFaUU7QUFDRDtBQUNmO0FBQ2I7QUFDTztBQVE1QixTQUFTUyxhQUFhQyxNQUFjLEVBQUVDLE1BQWM7SUFDakUsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdYLCtDQUFRQSxDQUFXO1FBQ2pEO1lBQ0VZLElBQUk7WUFDSkMsU0FBUztZQUNUQyxrQkFBa0I7WUFDbEJOLFFBQVFPLE9BQU9QO1lBQ2ZRLFFBQVE7WUFDUkMsV0FBVyxJQUFJQyxPQUFPQyxPQUFPO1lBQzdCVjtZQUNBVyxpQkFBaUJmLGdEQUFNQTtZQUN2QmdCLFlBQVk7UUFDZDtLQUNEO0lBQ0QsTUFBTUMsWUFBWXZCLDZDQUFNQSxDQUFnQjtJQUN4QyxNQUFNd0IsU0FBU3hCLDZDQUFNQSxDQUEyQjtJQUVoRCxrQ0FBa0M7SUFDbEMsTUFBTXlCLFNBQVMsQ0FBQ0MsSUFDZGYsU0FBU2dCLElBQUksQ0FDWCxDQUFDQyxJQUNDLEVBQUdQLGVBQWUsSUFBSU8sRUFBRVAsZUFBZSxLQUFLSyxFQUFFTCxlQUFlLElBQzVESyxFQUFFYixFQUFFLElBQUllLEVBQUVmLEVBQUUsS0FBS2EsRUFBRWIsRUFBRTtJQUc1QixNQUFNZ0Isb0JBQW9CLENBQUNDO1FBQ3pCbEIsWUFBWSxDQUFDbUI7WUFDWCxNQUFNQyxNQUFNRixTQUFTVCxlQUFlLEdBQ2hDVSxLQUFLRSxTQUFTLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRWIsZUFBZSxLQUFLUyxTQUFTVCxlQUFlLElBQ3BFLENBQUM7WUFDTCxJQUFJVyxPQUFPLEdBQUc7Z0JBQ1osTUFBTUcsT0FBTzt1QkFBSUo7aUJBQUs7Z0JBQ3RCSSxJQUFJLENBQUNILElBQUksR0FBRztvQkFBRSxHQUFHRyxJQUFJLENBQUNILElBQUk7b0JBQUUsR0FBR0YsUUFBUTtvQkFBRVIsWUFBWTtnQkFBTTtnQkFDM0QsT0FBT2E7WUFDVDtZQUNBLG9CQUFv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QWUsSUFBTUssRUFBRWIsRUFBRSxJQUFJZSxFQUFFZixFQUFFLEtBQUthLEVBQUViLEVBQUU7MEVBQUk7Z0NBQ2xIc0IsS0FBS3VDLElBQUksQ0FBQztvQ0FBRSxHQUFHaEQsQ0FBQztvQ0FBRUosWUFBWTtnQ0FBTTs0QkFDdEM7d0JBQ0Y7O29CQUNBLE9BQU9hO2dCQUNUOztRQUNGO2lEQUFHLEVBQUUsR0FBRyxXQUFXO0lBRW5CLE9BQU87UUFBRXhCO1FBQVVtRDtRQUFhUTtJQUFhO0FBQy9DIiwic291cmNlcyI6WyIvVXNlcnMvbGlmZWRpdmVyZ2VuY2UxL0Rlc2t0b3AvZmxpY2hhdC13ZWIvc3JjL2hvb2tzL3VzZVN0b21wQ2hhdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDbGllbnQsIHR5cGUgU3RvbXBTdWJzY3JpcHRpb24gfSBmcm9tICdAc3RvbXAvc3RvbXBqcyc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IFVzZXJBcGkgfSBmcm9tICcuLi9hcGlzL3VzZXIuYXBpJztcbmltcG9ydCB0eXBlIHsgQ2hhdE1lc3NhZ2UgfSBmcm9tICcuLi90eXBlL2NoYXQudHlwZSc7XG5cbnR5cGUgQW55TXNnID0gQ2hhdE1lc3NhZ2UgJiB7XG4gIGNsaWVudE1lc3NhZ2VJZD86IHN0cmluZztcbiAgb3B0aW1pc3RpYz86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTdG9tcENoYXQocm9vbUlkOiBudW1iZXIsIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8QW55TXNnW10+KFtcbiAgICB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG1lc3NhZ2U6ICfslYjrhZXtlZjshLjsmpQhJyxcbiAgICAgIHByb2ZpbGVDb2xvclR5cGU6ICdCTFVFJyxcbiAgICAgIHJvb21JZDogU3RyaW5nKHJvb21JZCksXG4gICAgICBzZW5kZXI6ICdGbGljaGF0IEJvdCcsXG4gICAgICB0aW1lU3RhbXA6IG5ldyBEYXRlKCkuZ2V0VGltZSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNsaWVudE1lc3NhZ2VJZDogdXVpZHY0KCksXG4gICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICB9XG4gIF0pO1xuICBjb25zdCBjbGllbnRSZWYgPSB1c2VSZWY8Q2xpZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHN1YlJlZiA9IHVzZVJlZjxTdG9tcFN1YnNjcmlwdGlvbiB8IG51bGw+KG51bGwpO1xuXG4gIC8vIOqwhOuLqO2VnCDspJHrs7Ug7LK07YGsOiBjbGllbnRNZXNzYWdlSWQg4oaSIGlkXG4gIGNvbnN0IGhhc01zZyA9IChtOiBQYXJ0aWFsPEFueU1zZz4pID0+XG4gICAgbWVzc2FnZXMuc29tZShcbiAgICAgICh4KSA9PlxuICAgICAgICAobS5jbGllbnRNZXNzYWdlSWQgJiYgeC5jbGllbnRNZXNzYWdlSWQgPT09IG0uY2xpZW50TWVzc2FnZUlkKSB8fFxuICAgICAgICAobS5pZCAmJiB4LmlkID09PSBtLmlkKVxuICAgICk7XG5cbiAgY29uc3QgcmVwbGFjZU9wdGltaXN0aWMgPSAoaW5jb21pbmc6IEFueU1zZykgPT4ge1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBpZHggPSBpbmNvbWluZy5jbGllbnRNZXNzYWdlSWRcbiAgICAgICAgPyBwcmV2LmZpbmRJbmRleCgocCkgPT4gcC5jbGllbnRNZXNzYWdlSWQgPT09IGluY29taW5nLmNsaWVudE1lc3NhZ2VJZClcbiAgICAgICAgOiAtMTtcbiAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICBuZXh0W2lkeF0gPSB7IC4uLm5leHRbaWR4XSwgLi4uaW5jb21pbmcsIG9wdGltaXN0aWM6IGZhbHNlIH07XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfVxuICAgICAgLy8g7JeG7Jy866m0IOyLoOq3nCDstpTqsIAo7KSR67O166eMIO2UvO2VqClcbiAgICAgIGlmIChoYXNNc2coaW5jb21pbmcpKSByZXR1cm4gcHJldjtcbiAgICAgIHJldHVybiBbLi4ucHJldiwgeyAuLi5pbmNvbWluZywgb3B0aW1pc3RpYzogZmFsc2UgfV07XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgeyBkYXRhOiB1c2VySW5mb0RhdGEgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWyd1c2VySW5mbyddLFxuICAgIHF1ZXJ5Rm46ICgpID0+IFVzZXJBcGkuZ2V0VXNlcigpLFxuICAgIHJldHJ5OiBmYWxzZSxcbiAgICBzdGFsZVRpbWU6IEluZmluaXR5LFxuICAgIHJlZmV0Y2hPbk1vdW50OiBmYWxzZSxcbiAgICByZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2UsXG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IENsaWVudCh7XG4gICAgICBicm9rZXJVUkw6ICd3c3M6Ly9jaGF0LmZsaWNoYXQuY28ua3Ivd3MtY2hhdCcsXG4gICAgICByZWNvbm5lY3REZWxheTogNTAwMCxcbiAgICAgIGhlYXJ0YmVhdEluY29taW5nOiAxMDAwMCxcbiAgICAgIGhlYXJ0YmVhdE91dGdvaW5nOiAxMDAwMCxcbiAgICB9KTtcblxuICAgIGNsaWVudC5vbkNvbm5lY3QgPSAoKSA9PiB7XG4gICAgICBzdWJSZWYuY3VycmVudCA9IGNsaWVudC5zdWJzY3JpYmUoYC90b3BpYy9jaGF0L3Jvb20vJHtyb29tSWR9YCwgKG1zZykgPT4ge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShtc2cuYm9keSkgYXMgQW55TXNnO1xuICAgICAgICByZXBsYWNlT3B0aW1pc3RpYyhwYXlsb2FkKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjbGllbnQuYWN0aXZhdGUoKTtcbiAgICBjbGllbnRSZWYuY3VycmVudCA9IGNsaWVudDtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdWJSZWYuY3VycmVudD8udW5zdWJzY3JpYmUoKTtcbiAgICAgIGNsaWVudC5kZWFjdGl2YXRlKCk7XG4gICAgICBjbGllbnRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfTtcbiAgfSwgW3Jvb21JZF0pO1xuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGNsaWVudCA9IGNsaWVudFJlZi5jdXJyZW50O1xuICAgIGlmICghY2xpZW50Py5jb25uZWN0ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGNsaWVudE1lc3NhZ2VJZCA9IHV1aWR2NCgpO1xuICAgIGNvbnN0IG9wdGltaXN0aWM6IEFueU1zZyA9IHtcbiAgICAgIGNsaWVudE1lc3NhZ2VJZCxcbiAgICAgIG9wdGltaXN0aWM6IHRydWUsXG4gICAgICBpZDogbnVsbCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHNlbmRlcjogdXNlckluZm9EYXRhPy5kYXRhPy5uaWNrTmFtZSA/PyAnJyxcbiAgICAgIHByb2ZpbGVDb2xvclR5cGU6IHVzZXJJbmZvRGF0YT8uZGF0YT8ucHJvZmlsZUNvbG9yVHlwZSA/PyBudWxsLFxuICAgICAgcm9vbUlkOiBTdHJpbmcocm9vbUlkKSxcbiAgICAgIG1lc3NhZ2U6IGNvbnRlbnQsXG4gICAgICB0aW1lU3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9O1xuXG4gICAgLy8g64KZ6rSA7KCBIOy2lOqwgFxuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgb3B0aW1pc3RpY10pO1xuXG4gICAgLy8g7ISc67KEIOyghOyGoSjshJzrsoTqsIAg6rCZ7J2AIGNsaWVudE1lc3NhZ2VJZOulvCDrkJjrj4zroKTso7zrqbQg7JyEIHJlcGxhY2VPcHRpbWlzdGlj7J20IOq1kOyytClcbiAgICBjbGllbnQucHVibGlzaCh7XG4gICAgICBkZXN0aW5hdGlvbjogJy9zZW5kL2NoYXQvbWVzc2FnZScsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHJvb21JZDogU3RyaW5nKHJvb21JZCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgbWVzc2FnZTogY29udGVudCxcbiAgICAgICAgc2VuZGVyOiBvcHRpbWlzdGljLnNlbmRlcixcbiAgICAgICAgcHJvZmlsZUNvbG9yVHlwZTogb3B0aW1pc3RpYy5wcm9maWxlQ29sb3JUeXBlLFxuICAgICAgICBjbGllbnRNZXNzYWdlSWQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfTtcblxuICAvLyB1c2VDYWxsYmFja+ycvOuhnCDqsJDsi7jshJwg7ZWo7IiYIOywuOyhsCDslYjsoJXtmZRcbiAgY29uc3QgbWVyZ2VJbml0aWFsID0gdXNlQ2FsbGJhY2soKGxpc3Q6IEFueU1zZ1tdKSA9PiB7XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gcHJldjtcbiAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldl07XG4gICAgICBsaXN0LmZvckVhY2goKG0pID0+IHtcbiAgICAgICAgaWYgKCFtZXNzYWdlcy5zb21lKHggPT4gKG0uY2xpZW50TWVzc2FnZUlkICYmIHguY2xpZW50TWVzc2FnZUlkID09PSBtLmNsaWVudE1lc3NhZ2VJZCkgfHwgKG0uaWQgJiYgeC5pZCA9PT0gbS5pZCkpKSB7XG4gICAgICAgICAgbmV4dC5wdXNoKHsgLi4ubSwgb3B0aW1pc3RpYzogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSk7XG4gIH0sIFtdKTsgLy8g67mIIOydmOyhtOyEsSDrsLDsl7RcblxuICByZXR1cm4geyBtZXNzYWdlcywgc2VuZE1lc3NhZ2UsIG1lcmdlSW5pdGlhbCB9O1xufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiQ2xpZW50IiwidXNlUXVlcnkiLCJ2NCIsInV1aWR2NCIsIlVzZXJBcGkiLCJ1c2VTdG9tcENoYXQiLCJyb29tSWQiLCJ1c2VySWQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaWQiLCJtZXNzYWdlIiwicHJvZmlsZUNvbG9yVHlwZSIsIlN0cmluZyIsInNlbmRlciIsInRpbWVTdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiY2xpZW50TWVzc2FnZUlkIiwib3B0aW1pc3RpYyIsImNsaWVudFJlZiIsInN1YlJlZiIsImhhc01zZyIsIm0iLCJzb21lIiwieCIsInJlcGxhY2VPcHRpbWlzdGljIiwiaW5jb21pbmciLCJwcmV2IiwiaWR4IiwiZmluZEluZGV4IiwicCIsIm5leHQiLCJkYXRhIiwidXNlckluZm9EYXRhIiwicXVlcnlLZXkiLCJxdWVyeUZuIiwiZ2V0VXNlciIsInJldHJ5Iiwic3RhbGVUaW1lIiwiSW5maW5pdHkiLCJyZWZldGNoT25Nb3VudCIsInJlZmV0Y2hPbldpbmRvd0ZvY3VzIiwiY2xpZW50IiwiYnJva2VyVVJMIiwicmVjb25uZWN0RGVsYXkiLCJoZWFydGJlYXRJbmNvbWluZyIsImhlYXJ0YmVhdE91dGdvaW5nIiwib25Db25uZWN0IiwiY3VycmVudCIsInN1YnNjcmliZSIsIm1zZyIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJib2R5IiwiYWN0aXZhdGUiLCJ1bnN1YnNjcmliZSIsImRlYWN0aXZhdGUiLCJzZW5kTWVzc2FnZSIsImNvbnRlbnQiLCJjb25uZWN0ZWQiLCJuaWNrTmFtZSIsInRvSVNPU3RyaW5nIiwicHVibGlzaCIsImRlc3RpbmF0aW9uIiwic3RyaW5naWZ5IiwibWVyZ2VJbml0aWFsIiwibGlzdCIsImxlbmd0aCIsImZvckVhY2giLCJwdXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useStompChat.ts\n"));

/***/ })

});